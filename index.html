<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VU Result Estimator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Icons (Inline SVGs for portability) ---
        const Calculator = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
        );
        const Plus = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="M12 5v14"/></svg>
        );
        const Trash2 = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
        );
        const AlertTriangle = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
        );
        const CheckCircle2 = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
        );
        const Settings = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        );
        const GraduationCap = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
        );
        const Info = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        );

        // --- Main Application ---
        const VUResultEstimator = () => {
            // --- Configuration State ---
            const [showSettings, setShowSettings] = useState(false);
            const [weights, setWeights] = useState({
                semester: 20,
                midterm: 20,
                final: 60 // Fixed
            });

            // --- Data State ---
            // Semester Work Activities
            const [activities, setActivities] = useState([
                { id: 1, name: 'Assignment 1', obtained: 0, total: 10 },
                { id: 2, name: 'Quiz 1', obtained: 0, total: 10 },
            ]);

            // Exams
            const [midterm, setMidterm] = useState({ obtained: 0, total: 40 });
            const [final, setFinal] = useState({ obtained: 0, total: 60, isEstimate: true });

            // --- Grading Scale Constant ---
            const GRADE_SCALE = [
                { label: 'A+', min: 90, gpa: '4.00', color: 'bg-green-600' },
                { label: 'A', min: 85, gpa: '4.00', color: 'bg-green-500' },
                { label: 'A-', min: 80, gpa: '3.66 - 3.99', color: 'bg-teal-500' },
                { label: 'B+', min: 75, gpa: '3.33 - 3.65', color: 'bg-blue-500' },
                { label: 'B', min: 71, gpa: '3.00 - 3.32', color: 'bg-blue-400' },
                { label: 'B-', min: 68, gpa: '2.66 - 2.99', color: 'bg-indigo-400' },
                { label: 'C', min: 61, gpa: '2.00 - 2.65', color: 'bg-yellow-500' },
                { label: 'D', min: 50, gpa: '1.00 - 1.99', color: 'bg-orange-500' },
                { label: 'F', min: 0, gpa: '0.00', color: 'bg-red-600' },
            ];

            // --- Handlers ---
            const handleWeightChange = (type, value) => {
                const val = parseFloat(value) || 0;
                setWeights(prev => ({ ...prev, [type]: val }));
            };

            const addActivity = () => {
                const newId = activities.length > 0 ? Math.max(...activities.map(a => a.id)) + 1 : 1;
                setActivities([...activities, { id: newId, name: `Activity ${newId}`, obtained: 0, total: 10 }]);
            };

            const removeActivity = (id) => {
                setActivities(activities.filter(a => a.id !== id));
            };

            const updateActivity = (id, field, value) => {
                setActivities(activities.map(a => 
                a.id === id ? { ...a, [field]: field === 'name' ? value : (parseFloat(value) || 0) } : a
                ));
            };

            // --- Core Calculations ---

            // 1. Semester Work Calculation
            const semesterStats = useMemo(() => {
                const totalObtained = activities.reduce((sum, item) => sum + item.obtained, 0);
                const totalMax = activities.reduce((sum, item) => sum + item.total, 0);
                
                // Avoid division by zero
                const percentage = totalMax > 0 ? (totalObtained / totalMax) * 100 : 0;
                const contribution = (percentage * weights.semester) / 100;

                return { totalObtained, totalMax, percentage, contribution };
            }, [activities, weights.semester]);

            // 2. Midterm Calculation (Includes Critical < 20% Rule)
            const midtermStats = useMemo(() => {
                const percentage = midterm.total > 0 ? (midterm.obtained / midterm.total) * 100 : 0;
                const isFailed = percentage < 20; // THE VU MIDTERM RULE
                const contribution = isFailed ? 0 : (percentage * weights.midterm) / 100;

                return { percentage, contribution, isFailed };
            }, [midterm, weights.midterm]);

            // 3. Final Term Calculation
            const finalStats = useMemo(() => {
                const percentage = final.total > 0 ? (final.obtained / final.total) * 100 : 0;
                const contribution = (percentage * weights.final) / 100;
                return { percentage, contribution };
            }, [final, weights.final]);

            // 4. Overall Result
            const totalStats = useMemo(() => {
                const totalPercentage = semesterStats.contribution + midtermStats.contribution + finalStats.contribution;
                
                // Determine Grade
                let grade = GRADE_SCALE.find(g => totalPercentage >= g.min) || GRADE_SCALE[GRADE_SCALE.length - 1];

                // Determine Risk Level
                let risk = 'Safe';
                let riskColor = 'text-green-600';
                if (grade.label === 'F' || grade.label === 'D') {
                risk = 'High Risk';
                riskColor = 'text-red-600';
                } else if (grade.label === 'C' || grade.label === 'B-') {
                risk = 'Borderline';
                riskColor = 'text-yellow-600';
                }

                return { totalPercentage, grade, risk, riskColor };
            }, [semesterStats, midtermStats, finalStats]);

            // 5. Scenario Simulator (Required Marks)
            const requiredMarks = useMemo(() => {
                const currentScore = semesterStats.contribution + midtermStats.contribution;
                
                return GRADE_SCALE.map(grade => {
                // Logic: Target - Current = Needed Contribution from Final
                // Needed Contribution / FinalWeight * 100 = Needed Percentage in Final
                // Needed Percentage * FinalTotalMarks / 100 = Needed Raw Marks
                const target = grade.min;
                const neededContribution = target - currentScore;
                
                if (neededContribution <= 0) return { ...grade, status: 'Achieved', marks: 0 };
                
                const neededRawPercentage = (neededContribution / weights.final) * 100;
                const neededRawMarks = (neededRawPercentage / 100) * final.total;

                if (neededRawMarks > final.total) return { ...grade, status: 'Impossible', marks: neededRawMarks };
                
                return { ...grade, status: 'Possible', marks: neededRawMarks };
                });
            }, [semesterStats.contribution, midtermStats.contribution, weights.final, final.total]);

            // Validation
            const totalWeight = weights.semester + weights.midterm + weights.final;
            const isWeightError = totalWeight !== 100;

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800 font-sans pb-12">
                {/* Header */}
                <header className="bg-blue-900 text-white p-6 shadow-lg">
                    <div className="max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center">
                    <div className="flex items-center gap-3">
                        <GraduationCap className="w-8 h-8 text-yellow-400" />
                        <div>
                        <h1 className="text-2xl font-bold">VU Result Estimator</h1>
                        <p className="text-blue-200 text-sm">Official Grading Scheme Compliant</p>
                        </div>
                    </div>
                    <button 
                        onClick={() => setShowSettings(!showSettings)}
                        className="mt-4 md:mt-0 flex items-center gap-2 bg-blue-800 hover:bg-blue-700 px-4 py-2 rounded-lg transition"
                    >
                        <Settings className="w-4 h-4" />
                        <span>Settings</span>
                    </button>
                    </div>
                </header>

                <main className="max-w-5xl mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
                    
                    {/* LEFT COLUMN: Inputs */}
                    <div className="lg:col-span-2 space-y-6">

                    {/* Configuration Panel (Collapsible) */}
                    {showSettings && (
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-blue-100 animate-in slide-in-from-top-4">
                        <h3 className="font-semibold text-lg mb-4 flex items-center gap-2">
                            <Settings className="w-5 h-5 text-gray-500" />
                            Assessment Weights Config
                        </h3>
                        <div className="grid grid-cols-3 gap-4">
                            <div>
                            <label className="block text-sm font-medium text-gray-600 mb-1">Semester Work %</label>
                            <input 
                                type="number" 
                                value={weights.semester}
                                onChange={(e) => handleWeightChange('semester', e.target.value)}
                                className="w-full border rounded-md p-2 focus:ring-2 focus:ring-blue-500 outline-none"
                            />
                            </div>
                            <div>
                            <label className="block text-sm font-medium text-gray-600 mb-1">Midterm %</label>
                            <input 
                                type="number" 
                                value={weights.midterm}
                                onChange={(e) => handleWeightChange('midterm', e.target.value)}
                                className="w-full border rounded-md p-2 focus:ring-2 focus:ring-blue-500 outline-none"
                            />
                            </div>
                            <div>
                            <label className="block text-sm font-medium text-gray-400 mb-1">Final (Fixed)</label>
                            <input 
                                type="number" 
                                value={60}
                                disabled
                                className="w-full border bg-gray-100 text-gray-500 rounded-md p-2 cursor-not-allowed"
                            />
                            </div>
                        </div>
                        {isWeightError && (
                            <div className="mt-3 text-red-600 text-sm flex items-center gap-2">
                            <AlertTriangle className="w-4 h-4" />
                            Total weight must be 100% (Current: {totalWeight}%)
                            </div>
                        )}
                        </div>
                    )}

                    {/* 1. Semester Work Section */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold text-gray-800">Semester Work</h2>
                        <span className="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded">
                            Weight: {weights.semester}%
                        </span>
                        </div>

                        <div className="space-y-3">
                        {activities.map((activity) => (
                            <div key={activity.id} className="flex flex-wrap items-end gap-3 p-3 bg-gray-50 rounded-lg group">
                            <div className="flex-grow min-w-[120px]">
                                <label className="text-xs text-gray-500 block mb-1">Activity Name</label>
                                <input 
                                type="text" 
                                value={activity.name}
                                onChange={(e) => updateActivity(activity.id, 'name', e.target.value)}
                                className="w-full bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500"
                                />
                            </div>
                            <div className="w-20">
                                <label className="text-xs text-gray-500 block mb-1">Obtained</label>
                                <input 
                                type="number" 
                                value={activity.obtained}
                                onChange={(e) => updateActivity(activity.id, 'obtained', e.target.value)}
                                className="w-full bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500"
                                />
                            </div>
                            <div className="w-20">
                                <label className="text-xs text-gray-500 block mb-1">Total</label>
                                <input 
                                type="number" 
                                value={activity.total}
                                onChange={(e) => updateActivity(activity.id, 'total', e.target.value)}
                                className="w-full bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500"
                                />
                            </div>
                            <button 
                                onClick={() => removeActivity(activity.id)}
                                className="text-gray-400 hover:text-red-500 p-1.5 rounded transition"
                                title="Remove Activity"
                            >
                                <Trash2 className="w-4 h-4" />
                            </button>
                            </div>
                        ))}
                        </div>

                        <div className="mt-4 flex justify-between items-center">
                        <button 
                            onClick={addActivity}
                            className="flex items-center gap-1 text-sm font-medium text-blue-600 hover:text-blue-800 transition"
                        >
                            <Plus className="w-4 h-4" /> Add Activity
                        </button>
                        <div className="text-right">
                            <p className="text-xs text-gray-500">Aggregate Contribution</p>
                            <p className="text-lg font-bold text-blue-600">{semesterStats.contribution.toFixed(2)} / {weights.semester}</p>
                        </div>
                        </div>
                    </div>

                    {/* 2. Midterm Section */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200 relative overflow-hidden">
                        <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold text-gray-800">Midterm Exam</h2>
                        <span className="bg-indigo-100 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded">
                            Weight: {weights.midterm}%
                        </span>
                        </div>

                        <div className="grid grid-cols-2 gap-6">
                        <div>
                            <label className="block text-sm font-medium text-gray-600 mb-1">Obtained Marks</label>
                            <input 
                            type="number" 
                            value={midterm.obtained}
                            onChange={(e) => setMidterm({...midterm, obtained: parseFloat(e.target.value) || 0})}
                            className="w-full text-lg border-2 border-gray-200 rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-600 mb-1">Total Marks</label>
                            <input 
                            type="number" 
                            value={midterm.total}
                            onChange={(e) => setMidterm({...midterm, total: parseFloat(e.target.value) || 0})}
                            className="w-full text-lg border-2 border-gray-200 rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition"
                            />
                        </div>
                        </div>

                        {/* Midterm Warning Logic */}
                        {midtermStats.isFailed ? (
                        <div className="mt-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-3">
                            <AlertTriangle className="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" />
                            <div>
                            <h4 className="text-sm font-bold text-red-700">Midterm Fail Rule Active</h4>
                            <p className="text-xs text-red-600 mt-1">
                                Your percentage is {midtermStats.percentage.toFixed(1)}% (less than 20%). 
                                According to VU policy, your midterm contribution is set to 0 regardless of marks obtained.
                            </p>
                            </div>
                        </div>
                        ) : (
                        <div className="mt-4 flex justify-end">
                            <div className="text-right">
                            <p className="text-xs text-gray-500">Aggregate Contribution</p>
                            <p className="text-lg font-bold text-indigo-600">{midtermStats.contribution.toFixed(2)} / {weights.midterm}</p>
                            </div>
                        </div>
                        )}
                    </div>

                    {/* 3. Final Term Section */}
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold text-gray-800">Final Exam</h2>
                        <span className="bg-purple-100 text-purple-800 text-xs font-semibold px-2.5 py-0.5 rounded">
                            Weight: {weights.final}% (Fixed)
                        </span>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 items-end">
                        <div>
                            <label className="block text-sm font-medium text-gray-600 mb-1">
                            Expected / Obtained Marks
                            </label>
                            <div className="relative">
                            <input 
                                type="number" 
                                value={final.obtained}
                                onChange={(e) => setFinal({...final, obtained: parseFloat(e.target.value) || 0})}
                                className="w-full text-lg border-2 border-gray-200 rounded-lg p-3 pr-16 focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition"
                            />
                            <span className="absolute right-4 top-4 text-gray-400 text-sm">/ {final.total}</span>
                            </div>
                        </div>
                        
                        <div className="w-full">
                            <label className="block text-sm font-medium text-gray-600 mb-2">Adjust Score Slider</label>
                            <input 
                            type="range" 
                            min="0" 
                            max={final.total} 
                            value={final.obtained}
                            onChange={(e) => setFinal({...final, obtained: parseFloat(e.target.value) || 0})}
                            className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"
                            />
                        </div>
                        </div>
                        <div className="mt-2 text-right">
                        <span className="text-sm text-gray-500">Total Final Marks: </span>
                        <input 
                            type="number" 
                            className="w-16 border-b border-gray-300 text-center focus:outline-none focus:border-purple-500"
                            value={final.total}
                            onChange={(e) => setFinal({...final, total: parseFloat(e.target.value) || 1})}
                        />
                        </div>
                    </div>
                    </div>

                    {/* RIGHT COLUMN: Results & Analysis */}
                    <div className="lg:col-span-1">
                        <div className="sticky top-6 space-y-6">
                            
                            {/* Main Result Card */}
                            <div className="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
                                <div className="bg-gradient-to-br from-blue-900 to-indigo-900 p-6 text-white text-center">
                                <h2 className="text-sm font-medium uppercase tracking-wider text-blue-200 mb-2">Projected Result</h2>
                                <div className="flex justify-center items-baseline gap-1">
                                    <span className="text-6xl font-extrabold">{totalStats.totalPercentage.toFixed(2)}</span>
                                    <span className="text-xl text-blue-300">%</span>
                                </div>
                                <div className={`inline-block px-4 py-1 rounded-full mt-4 text-sm font-bold shadow-sm ${totalStats.grade.color}`}>
                                    Grade: {totalStats.grade.label} | GPA: {totalStats.grade.gpa}
                                </div>
                                </div>

                                <div className="p-6">
                                <div className="flex items-center justify-between mb-2">
                                    <span className="text-sm text-gray-500 font-medium">Risk Assessment</span>
                                    <span className={`text-sm font-bold ${totalStats.riskColor} flex items-center gap-1`}>
                                    {totalStats.risk === 'Safe' ? <CheckCircle2 className="w-4 h-4"/> : <AlertTriangle className="w-4 h-4"/>}
                                    {totalStats.risk}
                                    </span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                                    <div 
                                    className={`h-2.5 rounded-full ${totalStats.totalPercentage < 50 ? 'bg-red-500' : 'bg-green-500'}`} 
                                    style={{ width: `${Math.min(totalStats.totalPercentage, 100)}%` }}
                                    ></div>
                                </div>

                                {/* Breakdown Summary */}
                                <div className="space-y-3 text-sm border-t pt-4 border-gray-100">
                                    <div className="flex justify-between">
                                    <span className="text-gray-600">Semester Work</span>
                                    <span className="font-semibold">{semesterStats.contribution.toFixed(2)}%</span>
                                    </div>
                                    <div className="flex justify-between">
                                    <span className="text-gray-600 flex items-center gap-1">
                                        Midterm 
                                        {midtermStats.isFailed && <span className="text-[10px] text-red-500 bg-red-50 px-1 rounded">FAILED</span>}
                                    </span>
                                    <span className={`font-semibold ${midtermStats.isFailed ? 'text-red-500 line-through decoration-2' : ''}`}>
                                        {midtermStats.contribution.toFixed(2)}%
                                    </span>
                                    </div>
                                    <div className="flex justify-between">
                                    <span className="text-gray-600">Final Term</span>
                                    <span className="font-semibold">{finalStats.contribution.toFixed(2)}%</span>
                                    </div>
                                </div>
                                </div>
                            </div>

                            {/* Scenario Planner / Required Marks */}
                            <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <Calculator className="w-5 h-5 text-blue-600" />
                                Minimum Marks Required
                                </h3>
                                <p className="text-xs text-gray-500 mb-4">
                                Marks required in <strong>Final Exam</strong> (out of {final.total}) to achieve specific grades based on your current performance.
                                </p>

                                <div className="space-y-2">
                                {[...requiredMarks].reverse().map((req, idx) => (
                                    <div key={idx} className={`flex justify-between items-center p-2 rounded text-sm ${
                                        req.status === 'Achieved' ? 'bg-green-50 opacity-60' : 
                                        req.status === 'Impossible' ? 'bg-gray-50 opacity-50' : 'bg-white border border-gray-100 shadow-sm'
                                    }`}>
                                    <div className="flex items-center gap-2">
                                        <span className={`w-8 h-8 flex items-center justify-center rounded-full text-white text-xs font-bold ${req.color}`}>
                                        {req.label}
                                        </span>
                                        <span className="text-gray-600 text-xs hidden sm:inline-block">({req.min}%)</span>
                                    </div>
                                    
                                    <div className="text-right font-medium">
                                        {req.status === 'Achieved' ? (
                                        <span className="text-green-600 flex items-center gap-1 text-xs">
                                            <CheckCircle2 className="w-3 h-3" /> Secured
                                        </span>
                                        ) : req.status === 'Impossible' ? (
                                        <span className="text-gray-400 text-xs">Not Possible</span>
                                        ) : (
                                        <span className="text-blue-700">
                                            {Math.ceil(req.marks)} <span className="text-gray-400 text-xs">/ {final.total}</span>
                                        </span>
                                        )}
                                    </div>
                                    </div>
                                ))}
                                </div>
                            </div>

                            {/* Info Card */}
                            <div className="bg-blue-50 rounded-xl p-4 border border-blue-100 text-xs text-blue-800 space-y-2">
                                <h4 className="font-bold flex items-center gap-2">
                                <Info className="w-4 h-4" />
                                VU Rules Applied
                                </h4>
                                <ul className="list-disc list-inside space-y-1 ml-1 opacity-80">
                                <li>Midterm below 20% results in 0 contribution.</li>
                                <li>Semester Work typically 15-20%.</li>
                                <li>Final term is locked at 60%.</li>
                                <li>Calculations match VULMS logic.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<VUResultEstimator />);
    </script>
</body>
</html>